<!doctype html><meta charset="utf-8"><meta name=viewport content="width=device-width,initial-scale=1">
<style>
body{font-family:sans-serif;margin:4px;font-size:14px;line-height:1.15}
table{border-collapse:collapse}
th,td{border:1px solid #ccc;padding:2px 4px;vertical-align:middle;white-space:nowrap}
input{width:100%;box-sizing:border-box;padding:2px 3px}
b{font-size:16px}
small{color:#666}
</style>

<div style="margin-bottom:6px">
  式：<small>=(B1*B2*(1+B6/100)+<b>B7t</b>)*(1+B10/100)</small><br>
  <small>B6 = B4 + B5 + B5a ／ B10 = B8 + B8a + B9(ON時) ／ <b>B7t = B7 + B7p(ON時)</b></small>
</div>

<table>
<tr><th>ハイノビ係数 (B1)</th><td><input id="b1" type="number" step="0.001" value="47.877" inputmode="decimal"></td></tr>
<tr><th>BASE (B2)</th><td><input id="b2" type="number" value="262" inputmode="decimal"></td></tr>
<tr><th>職係数 (B3 = B1×B2)</th><td id="b3"></td></tr>

<tr><th>素vit (B4)</th><td><input id="b4" type="number" value="100" inputmode="decimal"></td></tr>
<tr><th>補正vit (B5)</th><td><input id="b5" type="number" value="76" inputmode="decimal"></td></tr>
<tr><th>追加vit (B5a)</th><td><input id="b5a" type="number" value="0" inputmode="decimal"></td></tr>
<tr><th>vit計 (B6 = B4+B5+B5a)</th><td id="b6"></td></tr>

<tr><th>固定値 (B7)</th><td><input id="b7" type="number" value="51100" inputmode="decimal"></td></tr>

<!-- ▼ HP増加ポーション(大) -->
<tr>
  <th>HP増加P(大) (B7p)</th>
  <td>
    <label style="margin-right:8px"><input id="b7pon" type="checkbox"> 加算</label>
    <span id="b7p"></span>
  </td>
</tr>
<tr><th>固定値 合計 (B7t = B7 + B7p[ON])</th><td id="b7t"></td></tr>

<tr><th>%上昇分 (B8)</th><td><input id="b8" type="number" value="226" inputmode="decimal"></td></tr>
<tr>
  <th>追加％ (B8a)</th>
  <td><input id="b8a" type="number" value="0" inputmode="decimal" style="width:80px"></td>
</tr>

<!-- ▼ ジョンダ：チェックでON/OFF、OFFなら0% -->
<tr>
  <th>%ジョンダ (B9)</th>
  <td>
    <label style="margin-right:8px"><input id="b9on" type="checkbox" checked> 有効</label>
    <input id="b9" type="number" value="20" style="width:80px" inputmode="decimal">
  </td>
</tr>

<tr><th>%計 (B10 = B8 + B8a + B9)</th><td id="b10"></td></tr>
<tr><th>結果 (B11)</th><td><b id="b11"></b></td></tr>
</table>
<div style="height:32px"></div> <!-- 安全マージン（見切れ対策） -->

<script>
const $=id=>document.getElementById(id);
const N=v=>+v||0;
const F0=n=>Math.round(n).toLocaleString('ja-JP');
const F3=n=>n.toLocaleString('ja-JP',{minimumFractionDigits:3,maximumFractionDigits:3});

function calc(){
  const B1=N($('b1').value), B2=N($('b2').value),
        B4=N($('b4').value), B5=N($('b5').value), B5a=N($('b5a').value),
        B7=N($('b7').value), B8=N($('b8').value), B8a=N($('b8a').value);

  // 職係数
  const B3 = B1*B2;            $('b3').textContent = F3(B3);

  // vit計
  const B6 = B4 + B5 + B5a;    $('b6').textContent = F0(B6);

  // HP増加P(大) = floor(2500 + B2*3 + B2/3)
  const B7p = Math.floor(2500 + B2*3 + B2/3);
  $('b7p').textContent = F0(B7p);
  const addPotion = $('b7pon').checked;
  const B7t = B7 + (addPotion ? B7p : 0);
  $('b7t').textContent = F0(B7t);

  // %計
  const jOn = $('b9on').checked;
  $('b9').disabled = !jOn;
  const B9 = jOn ? N($('b9').value) : 0;
  const B10 = B8 + B8a + B9;   $('b10').textContent = B10.toLocaleString('ja-JP')+' %';

  // 結果
  const result = (B1*B2*(1+B6/100) + B7t) * (1 + B10/100);
  $('b11').textContent = F0(result);
}
document.querySelectorAll('input').forEach(el=>el.oninput=calc);
calc();
</script>
